{% extends 'layout.html' %}

{% block body%}
    {% set registration_image = url_for('static', filename='media/registration.png') %}

    <div class="home-main">
      <img
        src="{{ url_for('static', filename='media/main-hero.png') }}"
        alt="home main background"
        class="home-main-hero-bg"
      />
      <div class="search-bar-wrapper hero-search-wrapper">
        <form class="hero-search-form" action="{{ url_for('search') }}" method="get" data-search-form>
          <label class="sr-only" for="hero-search-input">Search for recipes</label>
          <input
            id="hero-search-input"
            type="search"
            name="q"
            class="main-hero-search"
            placeholder="search for recipies..."
            autocomplete="off"
            data-search-input
          />
          <button class="main-hero-search-btn" type="submit" aria-label="Search">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
        <div class="search-suggestions" data-search-suggestions></div>
      </div>
      <a
        class="main-hero-add-btn"
        href="{% if 'user' in session %}{{ url_for('add') }}{% else %}{{ url_for('login') }}{% endif %}"
      >
        ADD RECIPE
      </a>
    </div>
    <section class="list-section-1">
      <h2 class="list-section-title"><a href="{{ url_for('feed') }}">New Recipes</a></h2>
      <div class="list-section-1-item-group">
        {% if recent_recipes and recent_recipes|length > 0 %}
          {% for recipe in recent_recipes %}
            <a href="{{ url_for('recipe', recipe_id=recipe.id) }}" class="list-section-1-item">
              <img src="{{ recipe.image or registration_image }}" alt="{{ recipe.title }}" class="list-item-img" />
              <p class="list-item-name">{{ recipe.title }}</p>
            </a>
          {% endfor %}
        {% else %}
          {% for _ in range(4) %}
            <div class="list-section-1-item">
              <img src="{{ registration_image }}" alt="Recipe placeholder" class="list-item-img" />
              <p class="list-item-name">Coming soon</p>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </section>

    <section class="list-section-1">
      <h2 class="list-section-title"><a href="{{ url_for('feed') }}">MORE RECIPES</a></h2>
      <div class="list-section-1-item-group">
        {% if more_recipes and more_recipes|length > 0 %}
          {% for recipe in more_recipes %}
            <a href="{{ url_for('recipe', recipe_id=recipe.id) }}" class="retsept-list-item">
              <img src="{{ recipe.image or registration_image }}" alt="{{ recipe.title }}" class="retsept-list-img" />
              <p class="retsept-list-name">{{ recipe.title }}</p>
            </a>
          {% endfor %}
        {% else %}
          {% for _ in range(5) %}
            <div class="retsept-list-item">
              <img src="{{ registration_image }}" alt="Recipe placeholder" class="retsept-list-img" />
              <p class="retsept-list-name">Coming soon</p>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </section>

    <section class="list-section-1">
      <h2 class="list-section-title"><a href="{{ url_for('feed') }}">COLLECTIONS</a></h2>
      <div class="list-section-1-item-group">
        {% for collection in difficulty_collections or [] %}
          <a
            class="collection-list-item"
            href="{{ url_for('feed', difficulty=collection.difficulty) }}"
          >
            <img
              src="{{ collection.image or registration_image }}"
              alt="{{ collection.title }}"
              class="collection-list-img"
            />
            <p class="collection-list-name">{{ collection.title }}</p>
          </a>
        {% endfor %}
      </div>
    </section>

    <section class="populars-section">
        <div class="populars-sec-left">
            <p class="populars-left-title">The Most Popular Recipes on CookBook Right Now</p>
            <a class="populars-left-seeall" href="{{ url_for('feed') }}">View Complete Guide > </a>
            <div class="populars-middle-line"></div>
        </div>
        <div class="populars-sec-right">
            {% if popular_recipes and popular_recipes|length > 0 %}
                {% for recipe in popular_recipes %}
                    <a class="populars-sec-right-item" href="{{ url_for('recipe', recipe_id=recipe.id) }}">
                        <img src="{{ recipe.image or registration_image }}" alt="{{ recipe.title }}" class="populars-right-item-img">
                        <p class="populars-sec-right-title">{{ recipe.title }}</p>
                    </a>
                {% endfor %}
            {% else %}
                {% for _ in range(3) %}
                    <a class="populars-sec-right-item">
                        <img src="{{ registration_image }}" alt="Recipe placeholder" class="populars-right-item-img">
                        <p class="populars-sec-right-title">Coming soon</p>
                    </a>
                {% endfor %}
            {% endif %}
        </div>
    </section>

{% endblock %}
