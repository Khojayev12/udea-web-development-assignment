{% extends 'layout.html' %}

{% block body%}
{% set card_image = url_for('static', filename='media/registration.png') %}
<script>
    let filter_status = "open"
    const filter_subsections_state = {
        "feed-filter-subsection-1": "open",
        "feed-filter-subsection-2": "open",
        "feed-filter-subsection-3": "open"
    }

    const set_filter_state = (is_open) => {
        const filter_section = document.getElementById("filter-section")
        const toggle_buttons = document.querySelectorAll(".feed-filter-toggle-btn")
        if (!filter_section) {
            return
        }
        filter_status = is_open ? "open" : "close"
        filter_section.classList.toggle("filters-open", is_open)
        filter_section.classList.toggle("filters-close", !is_open)
        toggle_buttons.forEach((button) => {
            button.classList.toggle("dropdown-btn-open", is_open)
            button.classList.toggle("dropdown-btn-close", !is_open)
            button.setAttribute("aria-expanded", is_open)
        })
    }

    const filter_handler = () => {
        set_filter_state(filter_status !== "open")
    }

    const toggle_subsection = (section_id) => {
        const current_state = filter_subsections_state[section_id] === "open"
        const section = document.getElementById(section_id)
        const button = document.getElementById(section_id + "-btn")
        const next_state = current_state ? "close" : "open"

        if (!section || !button) {
            return
        }

        section.classList.toggle("feed-subsection-open", next_state === "open")
        section.classList.toggle("feed-subsection-close", next_state === "close")
        button.classList.toggle("dropdown-btn-open", next_state === "open")
        button.classList.toggle("dropdown-btn-close", next_state === "close")

        filter_subsections_state[section_id] = next_state
    }

    const reset_filters = () => {
        document.querySelectorAll(".feed-filter-option-input").forEach((input) => {
            input.checked = false
        })
    }

    document.addEventListener("DOMContentLoaded", () => {
        const should_open = !window.matchMedia("(max-width: 960px)").matches
        set_filter_state(should_open)
    })
</script>
<div class="feed-page">
    <div class="feed-filters-pane filters-open" id="filter-section">
        <div class="feed-filter-header">
            <h2 class="feed-filter-title">Filters</h2>
            <button class="feed-filter-subsection-btn feed-filter-toggle-btn dropdown-btn-open" id="feed-filter-toggle-btn"
                type="button" onclick="filter_handler()">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="feed-filter-actions">
            <button class="feed-reset-btn" type="button" onclick="reset_filters()">
                Reset
            </button>
        </div>
        <div class="feed-filter-dropdown">
            <div class="feed-filter-sub-section">
                <h3 class="feed-filter-sub-title">Cuisine</h3>
                <button class="feed-filter-subsection-btn dropdown-btn-open" id="feed-filter-subsection-1-btn"
                    type="button" onclick="toggle_subsection('feed-filter-subsection-1')">
                    <i class="fa-solid fa-angle-right"></i>
                </button>
            </div>
            <form class="feed-subsection-open" id="feed-filter-subsection-1">
                <label class="feed-filter-option">
                    <input type="radio" id="Italian" name="Cuisine" value="Italian" class="feed-filter-option-input">
                    Italian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Mexican" name="Cuisine" value="Mexican" class="feed-filter-option-input">
                    Mexican
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Indian" name="Cuisine" value="Indian" class="feed-filter-option-input">
                    Indian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="American" name="Cuisine" value="American" class="feed-filter-option-input">
                    American
                </label>
            </form>
        </div>

        <div class="feed-filter-dropdown">
            <div class="feed-filter-sub-section">
                <h3 class="feed-filter-sub-title">Cuisine 2</h3>
                <button class="feed-filter-subsection-btn dropdown-btn-open" id="feed-filter-subsection-2-btn"
                    type="button" onclick="toggle_subsection('feed-filter-subsection-2')">
                    <i class="fa-solid fa-angle-right"></i>
                </button>
            </div>
            <form class="feed-subsection-open" id="feed-filter-subsection-2">
                <label class="feed-filter-option">
                    <input type="radio" id="Italian-2" name="Cuisine2" value="Italian" class="feed-filter-option-input">
                    Italian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Mexican-2" name="Cuisine2" value="Mexican" class="feed-filter-option-input">
                    Mexican
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Indian-2" name="Cuisine2" value="Indian" class="feed-filter-option-input">
                    Indian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="American-2" name="Cuisine2" value="American" class="feed-filter-option-input">
                    American
                </label>
            </form>
        </div>

        <div class="feed-filter-dropdown">
            <div class="feed-filter-sub-section">
                <h3 class="feed-filter-sub-title">Cuisine</h3>
                <button class="feed-filter-subsection-btn dropdown-btn-open" id="feed-filter-subsection-3-btn"
                    type="button" onclick="toggle_subsection('feed-filter-subsection-3')">
                    <i class="fa-solid fa-angle-right"></i>
                </button>
            </div>
            <form class="feed-subsection-open" id="feed-filter-subsection-3">
                <label class="feed-filter-option">
                    <input type="radio" id="Italian-3" name="Cuisine3" value="Italian" class="feed-filter-option-input">
                    Italian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Mexican-3" name="Cuisine3" value="Mexican" class="feed-filter-option-input">
                    Mexican
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="Indian-3" name="Cuisine3" value="Indian" class="feed-filter-option-input">
                    Indian
                </label>
                <label class="feed-filter-option">
                    <input type="radio" id="American-3" name="Cuisine3" value="American" class="feed-filter-option-input">
                    American
                </label>
            </form>
        </div>
    </div>
    <div class="feed-list-page">
        <div class="feed-list-actions">
            <button class="feed-mobile-filter-btn feed-filter-toggle-btn dropdown-btn-open" id="feed-filter-toggle-mobile" type="button"
                onclick="filter_handler()">
                <i class="fa-solid fa-sliders"></i>
                Filters
            </button>
        </div>
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
        {% set template = './components/feedcard.html' %} {% include template %}
    </div>


</div>
{% endblock %}
